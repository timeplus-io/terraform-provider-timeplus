---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "timeplus_materialized_view Resource - terraform-provider-timeplus"
subcategory: ""
description: |-
  Timeplus materialized views are special views that persist its data. Once created, a materialized view will keep running in the background and continuously writes the query results to the underlying storage system.
---

# timeplus_materialized_view (Resource)

Timeplus materialized views are special views that persist its data. Once created, a materialized view will keep running in the background and continuously writes the query results to the underlying storage system.

## Example Usage

```terraform
resource "timeplus_stream" "traffic" {
  name        = "traffic"
  description = "A stream for materialized view example"

  column {
    name = "license_no"
    type = "string"
  }

  column {
    name = "road_speed_limit_mph"
    type = "uint8"
  }

  column {
    name = "speed_mph"
    type = "uint8"
  }
}

resource "timeplus_materialized_view" "basic_example" {
  name        = "speeding_vehcles"
  description = "A basic example with default retention policy"
  query       = <<-SQL
  select * from ${resource.timeplus_stream.traffic.name} where speed_mph > road_speed_limit_mph
  SQL
}

resource "timeplus_materialized_view" "retention_example" {
  name            = "speeding_vehcles_with_retention"
  description     = "A materialized view with custom retention policy"
  query           = <<-SQL
  select * from ${resource.timeplus_stream.traffic.name} where speed_mph > road_speed_limit_mph
  SQL
  retention_bytes = 10 * 1024 * 1204 * 1024 // 10Gi in bytes
  retention_ms    = 7 * 24 * 60 * 60 * 1000 // 7 days in ms 
  history_ttl     = "to_datetime(_tp_time) + INTERVAL 30 DAY"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The view name
- `query` (String) The query SQL of the view. Changing the SQL will lead to a recreation.

### Optional

- `description` (String) A detailed text describes the view
- `history_ttl` (String) A SQL expression defines the maximum age of historical data
- `retention_bytes` (Number) The retention size threadhold in bytes indicates how many data could be kept in the streaming store
- `retention_ms` (Number) The retention period threadhold in millisecond indicates how long data could be kept in the streaming store
- `target_stream` (String) The optional stream name that the materialized view writes data to
